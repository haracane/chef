# Subversion connections
LoadModule dav_svn_module    modules/mod_dav_svn.so
LoadModule mysql_auth_module modules/mod_auth_mysql.so

<Location /svn>
  DAV svn
  SVNListParentPath on
  SVNParentPath /var/opt/alminium/svn
  #SVNIndexXSLT "/svnindex.xsl"
  AuthType Basic
  AuthName redmine
  Require valid-user
   
  AuthMySQLEnable On

  # my.cnfの設定に合わせて変更
  AuthMySQLSocket /var/lib/mysql/mysql.sock

  # Redmineのdatabase.ymlの設定に合わせて変更
  AuthMySQLHost localhost
  AuthMySQLUser alminium
  AuthMySQLPassword alminium
  AuthMySQLDB alminium

  ### Redmineのテーブルとの紐付け
  # Redmineのユーザテーブル
  AuthMySQLNoPasswd Off
  AuthMySQLUserTable users
  AuthMySQLNameField login
  AuthMySQLPasswordField hashed_password
  AuthMySQLSaltField salt
  AuthMySQLPwEncryption sha1-rm
  # グループの設定。プロジェクト識別子をグループとして扱う
  AuthMySQLGroupTable "users, members, projects"
  AuthMySQLGroupCondition "users.id = members.user_id and projects.id = members.project_id"
  AuthMySQLGroupField "projects.identifier"
</Location>
